<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-08-21 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170821" />
    <meta http-equiv="Content-Language" content="en" />
    <title>psi-probe &#x2013; CPD Results</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarEnabled">
      <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="README.html" title="README">README</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="integration.html" title="CI Management">CI Management</a></li>
                  <li><a href="dependencies.html" title="Dependencies">Dependencies</a></li>
                  <li><a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
                  <li><a href="dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="dependency-management.html" title="Dependency Management">Dependency Management</a></li>
                  <li><a href="distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="index.html" title="About">About</a></li>
                  <li><a href="issue-tracking.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="license.html" title="Licenses">Licenses</a></li>
                  <li><a href="mail-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                  <li><a href="modules.html" title="Project Modules">Project Modules</a></li>
                  <li><a href="plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="source-repository.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="project-summary.html" title="Summary">Summary</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="dependency-updates-report.html" title="Dependency Updates Report">Dependency Updates Report</a></li>
                  <li><a href="plugin-updates-report.html" title="Plugin Updates Report">Plugin Updates Report</a></li>
                  <li><a href="property-updates-report.html" title="Property Updates Report">Property Updates Report</a></li>
                  <li><a href="xref/index.html" title="Source Xref">Source Xref</a></li>
                  <li><a href="xref-test/index.html" title="Test Source Xref">Test Source Xref</a></li>
                  <li><a href="surefire-report.html" title="Surefire Report">Surefire Report</a></li>
                  <li><a href="checkstyle-aggregate.html" title="Checkstyle">Checkstyle</a></li>
                  <li><a href="cpd.html" title="CPD">CPD</a></li>
                  <li><a href="pmd.html" title="PMD">PMD</a></li>
              </ul>
            </li>
        </ul>
      </li>
              </ul>
            <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
    <li><a href="./" title="Psi-Probe">Psi-Probe</a></li>
                </ul>
              </li>
            </ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="./" id="bannerLeft"><img src="images/psi-probe-banner.jpg" /></a></div>
        <div class="pull-right"><a href="https://tomcat.apache.org/" id="bannerRight"><img src="https://tomcat.apache.org/images/tomcat.png" /></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2017-08-21<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.0.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">User Guide</li>
    <li><a href="README.html" title="README"><span class="none"></span>README</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-down"></span>Project Reports</a>
      <ul class="nav nav-list">
    <li><a href="dependency-updates-report.html" title="Dependency Updates Report"><span class="none"></span>Dependency Updates Report</a>  </li>
    <li><a href="plugin-updates-report.html" title="Plugin Updates Report"><span class="none"></span>Plugin Updates Report</a>  </li>
    <li><a href="property-updates-report.html" title="Property Updates Report"><span class="none"></span>Property Updates Report</a>  </li>
    <li><a href="xref/index.html" title="Source Xref"><span class="none"></span>Source Xref</a>  </li>
    <li><a href="xref-test/index.html" title="Test Source Xref"><span class="none"></span>Test Source Xref</a>  </li>
    <li><a href="surefire-report.html" title="Surefire Report"><span class="none"></span>Surefire Report</a>  </li>
    <li><a href="checkstyle-aggregate.html" title="Checkstyle"><span class="none"></span>Checkstyle</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>CPD</a>
  </li>
    <li><a href="pmd.html" title="PMD"><span class="none"></span>PMD</a>  </li>
      </ul>
  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<div class="section">
<h2><a name="CPD_Results"></a>CPD Results</h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.6.1.</p></div>
<div class="section">
<h2><a name="Duplications"></a>Duplications</h2>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>psiprobe\Tomcat85ContainerAdapter.java</td>
<td>psi-probe-tomcat85</td>
<td><a href="./xref/psiprobe/Tomcat85ContainerAdapter.html#L59">59</a></td></tr>
<tr class="a">
<td>psiprobe\Tomcat90ContainerAdapter.java</td>
<td>psi-probe-tomcat9</td>
<td><a href="./xref/psiprobe/Tomcat90ContainerAdapter.html#L60">60</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>        || binding.startsWith(&quot;Pivotal tc&quot;) &amp;&amp; binding.contains(&quot;/8.5&quot;);
  }

  /**
   * Gets the filter mappings.
   *
   * @param fmap the fmap
   * @param dm the dm
   * @param filterClass the filter class
   * @return the filter mappings
   */
  protected List&lt;FilterMapping&gt; getFilterMappings(FilterMap fmap, String dm, String filterClass) {
    String[] urls = fmap.getURLPatterns();
    String[] servlets = fmap.getServletNames();
    List&lt;FilterMapping&gt; results = new ArrayList&lt;&gt;(urls.length + servlets.length);
    addFilterMapping(fmap.getFilterName(), dm, filterClass, urls, results, FilterMapType.URL);
    addFilterMapping(fmap.getFilterName(), dm, filterClass, servlets, results,
        FilterMapType.SERVLET_NAME);
    return results;
  }

  @Override
  protected JspCompilationContext createJspCompilationContext(String name, Options opt,
      ServletContext sctx, JspRuntimeContext jrctx, ClassLoader classLoader) {

    JspCompilationContext jcctx = new JspCompilationContext(name, opt, sctx, null, jrctx);
    jcctx.setClassLoader(classLoader);
    return jcctx;
  }

  @Override
  public void addContextResourceLink(Context context, List&lt;ApplicationResource&gt; resourceList,
      boolean contextBound) {

    NamingResourcesImpl namingResources = context.getNamingResources();
    for (ContextResourceLink link : namingResources.findResourceLinks()) {
      ApplicationResource resource = new ApplicationResource();

      logger.debug(&quot;reading resourceLink: {}&quot;, link.getName());
      resource.setApplicationName(context.getName());
      resource.setName(link.getName());
      resource.setType(link.getType());
      resource.setLinkTo(link.getGlobal());

      resourceList.add(resource);
    }
  }

  @Override
  public void addContextResource(Context context, List&lt;ApplicationResource&gt; resourceList,
      boolean contextBound) {
    NamingResourcesImpl namingResources = context.getNamingResources();
    for (ContextResource contextResource : namingResources.findResources()) {
      ApplicationResource resource = new ApplicationResource();

      logger.info(&quot;reading resource: {}&quot;, contextResource.getName());
      resource.setApplicationName(context.getName());
      resource.setName(contextResource.getName());
      resource.setType(contextResource.getType());
      resource.setScope(contextResource.getScope());
      resource.setAuth(contextResource.getAuth());
      resource.setDescription(contextResource.getDescription());

      resourceList.add(resource);
    }
  }

  @Override
  public List&lt;FilterMapping&gt; getApplicationFilterMaps(Context context) {
    FilterMap[] fms = context.findFilterMaps();
    List&lt;FilterMapping&gt; filterMaps = new ArrayList&lt;&gt;(fms.length);
    for (FilterMap filterMap : fms) {
      if (filterMap != null) {
        String dm;
        switch (filterMap.getDispatcherMapping()) {
          case FilterMap.ASYNC:
            dm = &quot;ASYNC&quot;;
            break;
          case FilterMap.ERROR:
            dm = &quot;ERROR&quot;;
            break;
          case FilterMap.FORWARD:
            dm = &quot;FORWARD&quot;;
            break;
          case FilterMap.INCLUDE:
            dm = &quot;INCLUDE&quot;;
            break;
          case FilterMap.REQUEST:
            dm = &quot;REQUEST&quot;;
            break;
          default:
            dm = &quot;&quot;;
        }

        String filterClass = &quot;&quot;;
        FilterDef fd = context.findFilterDef(filterMap.getFilterName());
        if (fd != null) {
          filterClass = fd.getFilterClass();
        }

        List&lt;FilterMapping&gt; filterMappings = getFilterMappings(filterMap, dm, filterClass);
        filterMaps.addAll(filterMappings);
      }
    }
    return filterMaps;
  }

  @Override
  public List&lt;FilterInfo&gt; getApplicationFilters(Context context) {
    FilterDef[] fds = context.findFilterDefs();
    List&lt;FilterInfo&gt; filterDefs = new ArrayList&lt;&gt;(fds.length);
    for (FilterDef filterDef : fds) {
      if (filterDef != null) {
        FilterInfo fi = getFilterInfo(filterDef);
        filterDefs.add(fi);
      }
    }
    return filterDefs;
  }

  /**
   * Gets the filter info.
   *
   * @param fd the fd
   * @return the filter info
   */
  private static FilterInfo getFilterInfo(FilterDef fd) {
    FilterInfo fi = new FilterInfo();
    fi.setFilterName(fd.getFilterName());
    fi.setFilterClass(fd.getFilterClass());
    fi.setFilterDesc(fd.getDescription());
    return fi;
  }

  @Override
  public List&lt;ApplicationParam&gt; getApplicationInitParams(Context context) {
    /*
     * We'll try to determine if a parameter value comes from a deployment descriptor or a context
     * descriptor.
     *
     * Assumption: context.findParameter() returns only values of parameters that are declared in a
     * deployment descriptor.
     *
     * If a parameter is declared in a context descriptor with override=false and redeclared in a
     * deployment descriptor, context.findParameter() still returns its value, even though the value
     * is taken from a context descriptor.
     *
     * context.findApplicationParameters() returns all parameters that are declared in a context
     * descriptor regardless of whether they are overridden in a deployment descriptor or not or
     * not.
     */
    /*
     * creating a set of parameter names that are declared in a context descriptor and can not be
     * overridden in a deployment descriptor.
     */
    Set&lt;String&gt; nonOverridableParams = new HashSet&lt;&gt;();
    for (ApplicationParameter appParam : context.findApplicationParameters()) {
      if (appParam != null &amp;&amp; !appParam.getOverride()) {
        nonOverridableParams.add(appParam.getName());
      }
    }
    List&lt;ApplicationParam&gt; initParams = new ArrayList&lt;&gt;();
    ServletContext servletCtx = context.getServletContext();
    for (String paramName : Collections.list(servletCtx.getInitParameterNames())) {
      ApplicationParam param = new ApplicationParam();
      param.setName(paramName);
      param.setValue(servletCtx.getInitParameter(paramName));
      /*
       * if the parameter is declared in a deployment descriptor and it is not declared in a context
       * descriptor with override=false, the value comes from the deployment descriptor
       */
      param.setFromDeplDescr(
          context.findParameter(paramName) != null &amp;&amp; !nonOverridableParams.contains(paramName));
      initParams.add(param);
    }
    return initParams;
  }

  @Override
  public boolean resourceExists(String name, Context context) {
    return context.getResources().getResource(name) != null;
  }

  @Override
  public InputStream getResourceStream(String name, Context context) throws IOException {
    WebResource resource = context.getResources().getResource(name);
    return resource.getInputStream();
  }

  @Override
  public Long[] getResourceAttributes(String name, Context context) {
    Long[] result = new Long[2];
    WebResource resource = context.getResources().getResource(name);
    result[0] = resource.getContentLength();
    result[1] = resource.getLastModified();
    return result;
  }

  /**
   * Returns the security token required to bind to a naming context.
   *
   * @param context the catalina context
   *
   * @return the security token for use with &lt;code&gt;ContextBindings&lt;/code&gt;
   */
  @Override
  protected Object getNamingToken(Context context) {
    // Used by NamingContextListener when setting up JNDI context
    Object token = context.getNamingToken();
    if (!ContextAccessController.checkSecurityToken(context, token)) {
      logger.error(&quot;Couldn't get a valid security token. ClassLoader binding will fail.&quot;);
    }
    return token;
  }

}</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>psiprobe\Tomcat80ContainerAdapter.java</td>
<td>psi-probe-tomcat8</td>
<td><a href="./xref/psiprobe/Tomcat80ContainerAdapter.html#L58">58</a></td></tr>
<tr class="a">
<td>psiprobe\Tomcat85ContainerAdapter.java</td>
<td>psi-probe-tomcat85</td>
<td><a href="./xref/psiprobe/Tomcat85ContainerAdapter.html#L59">59</a></td></tr>
<tr class="b">
<td>psiprobe\Tomcat90ContainerAdapter.java</td>
<td>psi-probe-tomcat9</td>
<td><a href="./xref/psiprobe/Tomcat90ContainerAdapter.html#L60">60</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>        || binding.startsWith(&quot;Pivotal tc&quot;) &amp;&amp; binding.contains(&quot;/8.0&quot;);
  }

  /**
   * Gets the filter mappings.
   *
   * @param fmap the fmap
   * @param dm the dm
   * @param filterClass the filter class
   * @return the filter mappings
   */
  protected List&lt;FilterMapping&gt; getFilterMappings(FilterMap fmap, String dm, String filterClass) {
    String[] urls = fmap.getURLPatterns();
    String[] servlets = fmap.getServletNames();
    List&lt;FilterMapping&gt; results = new ArrayList&lt;&gt;(urls.length + servlets.length);
    addFilterMapping(fmap.getFilterName(), dm, filterClass, urls, results, FilterMapType.URL);
    addFilterMapping(fmap.getFilterName(), dm, filterClass, servlets, results,
        FilterMapType.SERVLET_NAME);
    return results;
  }

  @Override
  protected JspCompilationContext createJspCompilationContext(String name, Options opt,
      ServletContext sctx, JspRuntimeContext jrctx, ClassLoader classLoader) {

    JspCompilationContext jcctx = new JspCompilationContext(name, opt, sctx, null, jrctx);
    jcctx.setClassLoader(classLoader);
    return jcctx;
  }

  @Override
  public void addContextResourceLink(Context context, List&lt;ApplicationResource&gt; resourceList,
      boolean contextBound) {

    NamingResourcesImpl namingResources = context.getNamingResources();
    for (ContextResourceLink link : namingResources.findResourceLinks()) {
      ApplicationResource resource = new ApplicationResource();

      logger.debug(&quot;reading resourceLink: {}&quot;, link.getName());
      resource.setApplicationName(context.getName());
      resource.setName(link.getName());
      resource.setType(link.getType());
      resource.setLinkTo(link.getGlobal());

      resourceList.add(resource);
    }
  }

  @Override
  public void addContextResource(Context context, List&lt;ApplicationResource&gt; resourceList,
      boolean contextBound) {
    NamingResourcesImpl namingResources = context.getNamingResources();
    for (ContextResource contextResource : namingResources.findResources()) {
      ApplicationResource resource = new ApplicationResource();

      logger.info(&quot;reading resource: {}&quot;, contextResource.getName());
      resource.setApplicationName(context.getName());
      resource.setName(contextResource.getName());
      resource.setType(contextResource.getType());
      resource.setScope(contextResource.getScope());
      resource.setAuth(contextResource.getAuth());
      resource.setDescription(contextResource.getDescription());

      resourceList.add(resource);
    }
  }

  @Override
  public List&lt;FilterMapping&gt; getApplicationFilterMaps(Context context) {
    FilterMap[] fms = context.findFilterMaps();
    List&lt;FilterMapping&gt; filterMaps = new ArrayList&lt;&gt;(fms.length);
    for (FilterMap filterMap : fms) {
      if (filterMap != null) {
        String dm;
        switch (filterMap.getDispatcherMapping()) {
          case FilterMap.ASYNC:
            dm = &quot;ASYNC&quot;;
            break;
          case FilterMap.ERROR:
            dm = &quot;ERROR&quot;;
            break;
          case FilterMap.FORWARD:
            dm = &quot;FORWARD&quot;;
            break;
          case FilterMap.INCLUDE:
            dm = &quot;INCLUDE&quot;;
            break;
          case FilterMap.REQUEST:
            dm = &quot;REQUEST&quot;;
            break;
          default:
            dm = &quot;&quot;;
        }

        String filterClass = &quot;&quot;;
        FilterDef fd = context.findFilterDef(filterMap.getFilterName());
        if (fd != null) {
          filterClass = fd.getFilterClass();
        }

        List&lt;FilterMapping&gt; filterMappings = getFilterMappings(filterMap, dm, filterClass);
        filterMaps.addAll(filterMappings);
      }
    }
    return filterMaps;
  }

  @Override
  public List&lt;FilterInfo&gt; getApplicationFilters(Context context) {
    FilterDef[] fds = context.findFilterDefs();
    List&lt;FilterInfo&gt; filterDefs = new ArrayList&lt;&gt;(fds.length);
    for (FilterDef filterDef : fds) {
      if (filterDef != null) {
        FilterInfo fi = getFilterInfo(filterDef);
        filterDefs.add(fi);
      }
    }
    return filterDefs;
  }

  /**
   * Gets the filter info.
   *
   * @param fd the fd
   * @return the filter info
   */
  private static FilterInfo getFilterInfo(FilterDef fd) {
    FilterInfo fi = new FilterInfo();
    fi.setFilterName(fd.getFilterName());
    fi.setFilterClass(fd.getFilterClass());
    fi.setFilterDesc(fd.getDescription());
    return fi;
  }

  @Override
  public List&lt;ApplicationParam&gt; getApplicationInitParams(Context context) {
    /*
     * We'll try to determine if a parameter value comes from a deployment descriptor or a context
     * descriptor.
     *
     * Assumption: context.findParameter() returns only values of parameters that are declared in a
     * deployment descriptor.
     *
     * If a parameter is declared in a context descriptor with override=false and redeclared in a
     * deployment descriptor, context.findParameter() still returns its value, even though the value
     * is taken from a context descriptor.
     *
     * context.findApplicationParameters() returns all parameters that are declared in a context
     * descriptor regardless of whether they are overridden in a deployment descriptor or not or
     * not.
     */
    /*
     * creating a set of parameter names that are declared in a context descriptor and can not be
     * overridden in a deployment descriptor.
     */
    Set&lt;String&gt; nonOverridableParams = new HashSet&lt;&gt;();
    for (ApplicationParameter appParam : context.findApplicationParameters()) {
      if (appParam != null &amp;&amp; !appParam.getOverride()) {
        nonOverridableParams.add(appParam.getName());
      }
    }
    List&lt;ApplicationParam&gt; initParams = new ArrayList&lt;&gt;();
    ServletContext servletCtx = context.getServletContext();
    for (String paramName : Collections.list(servletCtx.getInitParameterNames())) {
      ApplicationParam param = new ApplicationParam();
      param.setName(paramName);
      param.setValue(servletCtx.getInitParameter(paramName));
      /*
       * if the parameter is declared in a deployment descriptor and it is not declared in a context
       * descriptor with override=false, the value comes from the deployment descriptor
       */
      param.setFromDeplDescr(
          context.findParameter(paramName) != null &amp;&amp; !nonOverridableParams.contains(paramName));
      initParams.add(param);
    }
    return initParams;
  }

  @Override
  public boolean resourceExists(String name, Context context) {
    return context.getResources().getResource(name) != null;
  }

  @Override
  public InputStream getResourceStream(String name, Context context) throws IOException {
    WebResource resource = context.getResources().getResource(name);
    return resource.getInputStream();
  }

  @Override
  public Long[] getResourceAttributes(String name, Context context) {
    Long[] result = new Long[2];
    WebResource resource = context.getResources().getResource(name);
    result[0] = resource.getContentLength();
    result[1] = resource.getLastModified();
    return result;
  }

  /**
   * Returns the security token required to bind to a naming context.
   *
   * @param context the catalina context
   *
   * @return the security token for use with &lt;code&gt;ContextBindings&lt;/code&gt;
   */
  @Override
  protected Object getNamingToken(Context context) {
    // null token worked before 8.0.6
    Object token = null;</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\Tomcat70ContainerAdapter.java</td>
<td>psi-probe-tomcat7</td>
<td><a href="./xref/psiprobe/Tomcat70ContainerAdapter.html#L118">118</a></td></tr>
<tr class="b">
<td>psiprobe\Tomcat80ContainerAdapter.java</td>
<td>psi-probe-tomcat8</td>
<td><a href="./xref/psiprobe/Tomcat80ContainerAdapter.html#L109">109</a></td></tr>
<tr class="a">
<td>psiprobe\Tomcat85ContainerAdapter.java</td>
<td>psi-probe-tomcat85</td>
<td><a href="./xref/psiprobe/Tomcat85ContainerAdapter.html#L110">110</a></td></tr>
<tr class="b">
<td>psiprobe\Tomcat90ContainerAdapter.java</td>
<td>psi-probe-tomcat9</td>
<td><a href="./xref/psiprobe/Tomcat90ContainerAdapter.html#L111">111</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>    NamingResources namingResources = context.getNamingResources();
    for (ContextResource contextResource : namingResources.findResources()) {
      ApplicationResource resource = new ApplicationResource();

      logger.info(&quot;reading resource: {}&quot;, contextResource.getName());
      resource.setApplicationName(context.getName());
      resource.setName(contextResource.getName());
      resource.setType(contextResource.getType());
      resource.setScope(contextResource.getScope());
      resource.setAuth(contextResource.getAuth());
      resource.setDescription(contextResource.getDescription());

      resourceList.add(resource);
    }
  }

  @Override
  public List&lt;FilterMapping&gt; getApplicationFilterMaps(Context context) {
    FilterMap[] fms = context.findFilterMaps();
    List&lt;FilterMapping&gt; filterMaps = new ArrayList&lt;&gt;(fms.length);
    for (FilterMap filterMap : fms) {
      if (filterMap != null) {
        String dm;
        switch (filterMap.getDispatcherMapping()) {
          case FilterMap.ASYNC:
            dm = &quot;ASYNC&quot;;
            break;
          case FilterMap.ERROR:
            dm = &quot;ERROR&quot;;
            break;
          case FilterMap.FORWARD:
            dm = &quot;FORWARD&quot;;
            break;
          case FilterMap.INCLUDE:
            dm = &quot;INCLUDE&quot;;
            break;
          case FilterMap.REQUEST:
            dm = &quot;REQUEST&quot;;
            break;
          default:
            dm = &quot;&quot;;
        }

        String filterClass = &quot;&quot;;
        FilterDef fd = context.findFilterDef(filterMap.getFilterName());
        if (fd != null) {
          filterClass = fd.getFilterClass();
        }

        List&lt;FilterMapping&gt; filterMappings = getFilterMappings(filterMap, dm, filterClass);
        filterMaps.addAll(filterMappings);
      }
    }
    return filterMaps;
  }

  @Override
  public List&lt;FilterInfo&gt; getApplicationFilters(Context context) {
    FilterDef[] fds = context.findFilterDefs();
    List&lt;FilterInfo&gt; filterDefs = new ArrayList&lt;&gt;(fds.length);
    for (FilterDef filterDef : fds) {
      if (filterDef != null) {
        FilterInfo fi = getFilterInfo(filterDef);
        filterDefs.add(fi);
      }
    }
    return filterDefs;
  }

  /**
   * Gets the filter info.
   *
   * @param fd the fd
   * @return the filter info
   */
  private static FilterInfo getFilterInfo(FilterDef fd) {
    FilterInfo fi = new FilterInfo();
    fi.setFilterName(fd.getFilterName());
    fi.setFilterClass(fd.getFilterClass());
    fi.setFilterDesc(fd.getDescription());
    return fi;
  }

  @Override
  public List&lt;ApplicationParam&gt; getApplicationInitParams(Context context) {
    /*
     * We'll try to determine if a parameter value comes from a deployment descriptor or a context
     * descriptor.
     *
     * Assumption: context.findParameter() returns only values of parameters that are declared in a
     * deployment descriptor.
     *
     * If a parameter is declared in a context descriptor with override=false and redeclared in a
     * deployment descriptor, context.findParameter() still returns its value, even though the value
     * is taken from a context descriptor.
     *
     * context.findApplicationParameters() returns all parameters that are declared in a context
     * descriptor regardless of whether they are overridden in a deployment descriptor or not or
     * not.
     */
    /*
     * creating a set of parameter names that are declared in a context descriptor and can not be
     * overridden in a deployment descriptor.
     */
    Set&lt;String&gt; nonOverridableParams = new HashSet&lt;&gt;();
    for (ApplicationParameter appParam : context.findApplicationParameters()) {
      if (appParam != null &amp;&amp; !appParam.getOverride()) {
        nonOverridableParams.add(appParam.getName());
      }
    }
    List&lt;ApplicationParam&gt; initParams = new ArrayList&lt;&gt;();
    ServletContext servletCtx = context.getServletContext();
    for (String paramName : Collections.list(servletCtx.getInitParameterNames())) {
      ApplicationParam param = new ApplicationParam();
      param.setName(paramName);
      param.setValue(servletCtx.getInitParameter(paramName));
      /*
       * if the parameter is declared in a deployment descriptor and it is not declared in a context
       * descriptor with override=false, the value comes from the deployment descriptor
       */
      param.setFromDeplDescr(
          context.findParameter(paramName) != null &amp;&amp; !nonOverridableParams.contains(paramName));
      initParams.add(param);
    }
    return initParams;
  }

  @Override
  public boolean resourceExists(String name, Context context) {</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\tools\logging\logback\LogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/logback/LogbackLoggerAccessor.html#L69">69</a></td></tr>
<tr class="b">
<td>psiprobe\tools\logging\slf4jlogback\TomcatSlf4jLogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/slf4jlogback/TomcatSlf4jLogbackLoggerAccessor.html#L70">70</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>        for (LogbackAppenderAccessor wrappedAppender : appenders) {
          if (wrappedAppender.getIndex().equals(name)) {
            return wrappedAppender;
          }
        }
      }
      return wrapAppender(appender);
    } catch (Exception e) {
      logger.error(&quot;{}#getAppender() failed&quot;, getTarget().getClass().getName(), e);
    }
    return null;
  }

  /**
   * Checks if is context.
   *
   * @return true, if is context
   */
  public boolean isContext() {
    return false;
  }

  /**
   * Checks if is root.
   *
   * @return true, if is root
   */
  public boolean isRoot() {
    return &quot;ROOT&quot;.equals(getName());
  }

  /**
   * Gets the name.
   *
   * @return the name
   */
  public String getName() {
    return (String) getProperty(getTarget(), &quot;name&quot;, null);
  }

  /**
   * Gets the log level of this logger.
   * 
   * @return the level of this logger
   */
  public String getLevel() {
    try {
      Object level = MethodUtils.invokeMethod(getTarget(), &quot;getLevel&quot;);
      return (String) MethodUtils.invokeMethod(level, &quot;toString&quot;);
    } catch (Exception e) {
      logger.error(&quot;{}#getLevel() failed&quot;, getTarget().getClass().getName(), e);
    }
    return null;
  }

  /**
   * Sets the log level of this logger.
   * 
   * @param newLevelStr the name of the new level
   */
  public void setLevel(String newLevelStr) {
    try {
      Object level = MethodUtils.invokeMethod(getTarget(), &quot;getLevel&quot;);
      Object newLevel = MethodUtils.invokeMethod(level, &quot;toLevel&quot;, newLevelStr);
      MethodUtils.invokeMethod(getTarget(), &quot;setLevel&quot;, newLevel);
    } catch (Exception e) {
      logger.error(&quot;{}#setLevel('{}') failed&quot;, getTarget().getClass().getName(), newLevelStr, e);
    }
  }

  /**
   * Gets the sifted appenders.
   *
   * @param appender the appender
   * @return the sifted appenders
   * @throws Exception the exception
   */
  @SuppressWarnings(&quot;unchecked&quot;)
  private List&lt;Object&gt; getSiftedAppenders(Object appender) throws Exception {
    if (&quot;ch.qos.logback.classic.sift.SiftingAppender&quot;.equals(appender.getClass().getName())) {</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\controllers\deploy\CopySingleFileController.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/controllers/deploy/CopySingleFileController.html#L54">54</a></td></tr>
<tr class="b">
<td>psiprobe\controllers\deploy\DeployController.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/controllers/deploy/DeployController.html#L35">35</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>  @RequestMapping(path = &quot;/adm/deployfile.htm&quot;)
  @Override
  public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
      throws Exception {
    return super.handleRequest(request, response);
  }

  @Override
  protected ModelAndView handleRequestInternal(HttpServletRequest request,
      HttpServletResponse response) throws Exception {

    List&lt;Context&gt; apps;
    try {
      apps = getContainerWrapper().getTomcatContainer().findContexts();
    } catch (NullPointerException ex) {
      throw new IllegalStateException(
          &quot;No container found for your server: &quot; + getServletContext().getServerInfo(), ex);
    }

    List&lt;Map&lt;String, String&gt;&gt; applications = new ArrayList&lt;&gt;();
    for (Context appContext : apps) {
      // check if this is not the ROOT webapp
      if (appContext.getName() != null &amp;&amp; appContext.getName().trim().length() &gt; 0) {
        Map&lt;String, String&gt; app = new HashMap&lt;&gt;();
        app.put(&quot;value&quot;, appContext.getName());
        app.put(&quot;label&quot;, appContext.getName());
        applications.add(app);
      }
    }
    request.setAttribute(&quot;apps&quot;, applications);</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\tools\logging\log4j\Log4JLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/log4j/Log4JLoggerAccessor.html#L92">92</a></td></tr>
<tr class="b">
<td>psiprobe\tools\logging\logback\LogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/logback/LogbackLoggerAccessor.html#L97">97</a></td></tr>
<tr class="a">
<td>psiprobe\tools\logging\slf4jlogback\TomcatSlf4jLogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/slf4jlogback/TomcatSlf4jLogbackLoggerAccessor.html#L98">98</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>    return &quot;root&quot;.equals(getName()) &amp;&amp; &quot;org.apache.log4j.spi.RootLogger&quot;.equals(getTargetClass());
  }

  /**
   * Gets the name.
   *
   * @return the name
   */
  public String getName() {
    return (String) getProperty(getTarget(), &quot;name&quot;, null);
  }

  /**
   * Gets the level.
   *
   * @return the level
   */
  public String getLevel() {
    try {
      Object level = MethodUtils.invokeMethod(getTarget(), &quot;getLevel&quot;);
      return (String) MethodUtils.invokeMethod(level, &quot;toString&quot;);
    } catch (Exception e) {
      logger.error(&quot;{}#getLevel() failed&quot;, getTarget().getClass().getName(), e);
    }
    return null;
  }

  /**
   * Sets the level.
   *
   * @param newLevelStr the new level
   */
  public void setLevel(String newLevelStr) {
    try {
      Object level = MethodUtils.invokeMethod(getTarget(), &quot;getLevel&quot;);
      Object newLevel = MethodUtils.invokeMethod(level, &quot;toLevel&quot;, newLevelStr);
      MethodUtils.invokeMethod(getTarget(), &quot;setLevel&quot;, newLevel);
    } catch (Exception e) {
      logger.error(&quot;{}#setLevel('{}') failed&quot;, getTarget().getClass().getName(), newLevelStr, e);
    }
  }</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>psiprobe\Tomcat70ContainerAdapter.java</td>
<td>psi-probe-tomcat7</td>
<td><a href="./xref/psiprobe/Tomcat70ContainerAdapter.html#L67">67</a></td></tr>
<tr class="a">
<td>psiprobe\Tomcat80ContainerAdapter.java</td>
<td>psi-probe-tomcat8</td>
<td><a href="./xref/psiprobe/Tomcat80ContainerAdapter.html#L58">58</a></td></tr>
<tr class="b">
<td>psiprobe\Tomcat85ContainerAdapter.java</td>
<td>psi-probe-tomcat85</td>
<td><a href="./xref/psiprobe/Tomcat85ContainerAdapter.html#L59">59</a></td></tr>
<tr class="a">
<td>psiprobe\Tomcat90ContainerAdapter.java</td>
<td>psi-probe-tomcat9</td>
<td><a href="./xref/psiprobe/Tomcat90ContainerAdapter.html#L60">60</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>        || binding.startsWith(&quot;Pivotal tc&quot;) &amp;&amp; binding.contains(&quot;/7.0&quot;);
  }

  /**
   * Gets the filter mappings.
   *
   * @param fmap the fmap
   * @param dm the dm
   * @param filterClass the filter class
   * @return the filter mappings
   */
  protected List&lt;FilterMapping&gt; getFilterMappings(FilterMap fmap, String dm, String filterClass) {
    String[] urls = fmap.getURLPatterns();
    String[] servlets = fmap.getServletNames();
    List&lt;FilterMapping&gt; results = new ArrayList&lt;&gt;(urls.length + servlets.length);
    addFilterMapping(fmap.getFilterName(), dm, filterClass, urls, results, FilterMapType.URL);
    addFilterMapping(fmap.getFilterName(), dm, filterClass, servlets, results,
        FilterMapType.SERVLET_NAME);
    return results;
  }

  @Override
  protected JspCompilationContext createJspCompilationContext(String name, Options opt,
      ServletContext sctx, JspRuntimeContext jrctx, ClassLoader classLoader) {

    JspCompilationContext jcctx = new JspCompilationContext(name, opt, sctx, null, jrctx);
    jcctx.setClassLoader(classLoader);
    return jcctx;
  }

  @Override
  public void addContextResourceLink(Context context, List&lt;ApplicationResource&gt; resourceList,
      boolean contextBound) {</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>psiprobe\beans\accessors\Tomcat8DbcpDatasourceAccessor.java</td>
<td>psi-probe-tomcat8</td>
<td><a href="./xref/psiprobe/beans/accessors/Tomcat8DbcpDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="a">
<td>psiprobe\beans\accessors\Tomcat85DbcpDatasourceAccessor.java</td>
<td>psi-probe-tomcat85</td>
<td><a href="./xref/psiprobe/beans/accessors/Tomcat85DbcpDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="b">
<td>psiprobe\beans\accessors\Tomcat9DbcpDatasourceAccessor.java</td>
<td>psi-probe-tomcat9</td>
<td><a href="./xref/psiprobe/beans/accessors/Tomcat9DbcpDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>public class Tomcat8DbcpDatasourceAccessor implements DatasourceAccessor {

  @Override
  public DataSourceInfo getInfo(Object resource) throws Exception {
    DataSourceInfo dataSourceInfo = null;
    if (canMap(resource)) {
      BasicDataSource source = (BasicDataSource) resource;
      dataSourceInfo = new DataSourceInfo();
      dataSourceInfo.setBusyConnections(source.getNumActive());
      dataSourceInfo.setEstablishedConnections(source.getNumIdle() + source.getNumActive());
      dataSourceInfo.setMaxConnections(source.getMaxTotal());
      dataSourceInfo.setJdbcUrl(source.getUrl());
      dataSourceInfo.setUsername(source.getUsername());
      dataSourceInfo.setResettable(false);
      dataSourceInfo.setType(&quot;tomcat-dbcp2&quot;);
    }
    return dataSourceInfo;
  }

  @Override
  public boolean reset(Object resource) throws Exception {
    return false;
  }

  @Override
  public boolean canMap(Object resource) {
    return &quot;org.apache.tomcat.dbcp.dbcp2.BasicDataSource&quot;.equals(resource.getClass().getName())
        &amp;&amp; resource instanceof BasicDataSource;
  }

}</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\tools\logging\logback\LogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/logback/LogbackLoggerAccessor.html#L36">36</a></td></tr>
<tr class="b">
<td>psiprobe\tools\logging\slf4jlogback\TomcatSlf4jLogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/slf4jlogback/TomcatSlf4jLogbackLoggerAccessor.html#L36">36</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>    List&lt;LogbackAppenderAccessor&gt; appenders = new ArrayList&lt;&gt;();
    try {
      for (Object appender : Collections.list(Iterators.asEnumeration(
          (Iterator&lt;Object&gt;) MethodUtils.invokeMethod(getTarget(), &quot;iteratorForAppenders&quot;)))) {
        List&lt;Object&gt; siftedAppenders = getSiftedAppenders(appender);
        if (siftedAppenders != null) {
          for (Object siftedAppender : siftedAppenders) {
            wrapAndAddAppender(siftedAppender, appenders);
          }
        } else {
          wrapAndAddAppender(appender, appenders);
        }
      }
    } catch (NoClassDefFoundError e) {
      logger.error(&quot;{}#getAppenders() failed&quot;, getTarget().getClass().getName(), e);
      logger.error(&quot;To see this logger, upgrade slf4j to 1.7.21+&quot;);
    } catch (Exception e) {
      logger.error(&quot;{}#getAppenders() failed&quot;, getTarget().getClass().getName(), e);
    }
    return appenders;
  }

  /**
   * Returns the appender of this logger with the given name.
   * 
   * @param name the name of the appender to return
   * @return the appender with the given name, or null if no such appender exists for this logger
   */
  public LogbackAppenderAccessor getAppender(String name) {</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\tools\logging\log4j2\Log4J2LoggerConfigAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/log4j2/Log4J2LoggerConfigAccessor.html#L117">117</a></td></tr>
<tr class="b">
<td>psiprobe\tools\logging\logback\LogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/logback/LogbackLoggerAccessor.html#L97">97</a></td></tr>
<tr class="a">
<td>psiprobe\tools\logging\slf4jlogback\TomcatSlf4jLogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/slf4jlogback/TomcatSlf4jLogbackLoggerAccessor.html#L98">98</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>    return &quot;&quot;.equals(getName());
  }

  /**
   * Gets the name.
   *
   * @return the name
   */
  public String getName() {
    return (String) getProperty(getTarget(), &quot;name&quot;, null);
  }

  /**
   * Gets the level.
   *
   * @return the level
   */
  public String getLevel() {
    try {
      Object level = MethodUtils.invokeMethod(getTarget(), &quot;getLevel&quot;);
      return (String) MethodUtils.invokeMethod(level, &quot;toString&quot;);
    } catch (Exception e) {
      logger.error(&quot;{}#getLevel() failed&quot;, getTarget().getClass().getName(), e);
    }
    return null;
  }

  /**
   * Sets the level.
   *
   * @param newLevelStr the new level
   */
  public void setLevel(String newLevelStr) {
    try {
      Object level = MethodUtils.invokeMethod(getTarget(), &quot;getLevel&quot;);
      Object newLevel = MethodUtils.invokeMethod(level, &quot;toLevel&quot;, newLevelStr);
      MethodUtils.invokeMethod(getTarget(), &quot;setLevel&quot;, newLevel);</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>psiprobe\beans\accessors\Dbcp2DatasourceAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/beans/accessors/Dbcp2DatasourceAccessor.html#L20">20</a></td></tr>
<tr class="a">
<td>psiprobe\beans\accessors\OpenEjbBasicDatasourceAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/beans/accessors/OpenEjbBasicDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>public class Dbcp2DatasourceAccessor implements DatasourceAccessor {

  @Override
  public DataSourceInfo getInfo(Object resource) throws Exception {
    DataSourceInfo dataSourceInfo = null;
    if (canMap(resource)) {
      BasicDataSource source = (BasicDataSource) resource;
      dataSourceInfo = new DataSourceInfo();
      dataSourceInfo.setBusyConnections(source.getNumActive());
      dataSourceInfo.setEstablishedConnections(source.getNumIdle() + source.getNumActive());
      dataSourceInfo.setMaxConnections(source.getMaxTotal());
      dataSourceInfo.setJdbcUrl(source.getUrl());
      dataSourceInfo.setUsername(source.getUsername());
      dataSourceInfo.setResettable(false);
      dataSourceInfo.setType(&quot;commons-dbcp2&quot;);
    }
    return dataSourceInfo;
  }

  @Override
  public boolean reset(Object resource) throws Exception {
    return false;
  }

  @Override
  public boolean canMap(Object resource) {
    return &quot;org.apache.commons.dbcp2.BasicDataSource&quot;.equals(resource.getClass().getName())</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>psiprobe\beans\accessors\TomcatJdbcPoolDatasourceAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/beans/accessors/TomcatJdbcPoolDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="a">
<td>psiprobe\beans\accessors\TomEEJdbcPoolDatasourceAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/beans/accessors/TomEEJdbcPoolDatasourceAccessor.html#L21">21</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>public class TomcatJdbcPoolDatasourceAccessor implements DatasourceAccessor {

  @Override
  public DataSourceInfo getInfo(Object resource) throws Exception {
    DataSourceInfo dataSourceInfo = null;
    if (canMap(resource)) {
      DataSource source = (DataSource) resource;
      dataSourceInfo = new DataSourceInfo();
      dataSourceInfo.setBusyConnections(source.getNumActive());
      dataSourceInfo.setEstablishedConnections(source.getNumIdle() + source.getNumActive());
      dataSourceInfo.setMaxConnections(source.getMaxActive());
      dataSourceInfo.setJdbcUrl(source.getUrl());
      dataSourceInfo.setUsername(source.getUsername());
      dataSourceInfo.setResettable(false);
      dataSourceInfo.setType(&quot;tomcat-jdbc&quot;);
    }
    return dataSourceInfo;
  }

  @Override
  public boolean reset(Object resource) throws Exception {
    return false;
  }

  @Override
  public boolean canMap(Object resource) {
    return &quot;org.apache.tomcat.jdbc.pool.DataSource&quot;.equals(resource.getClass().getName())</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>psiprobe\tools\logging\log4j2\Log4J2LoggerConfigAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/log4j2/Log4J2LoggerConfigAccessor.html#L117">117</a></td></tr>
<tr class="a">
<td>psiprobe\tools\logging\log4j\Log4JLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/log4j/Log4JLoggerAccessor.html#L92">92</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>    return &quot;&quot;.equals(getName());
  }

  /**
   * Gets the name.
   *
   * @return the name
   */
  public String getName() {
    return (String) getProperty(getTarget(), &quot;name&quot;, null);
  }

  /**
   * Gets the level.
   *
   * @return the level
   */
  public String getLevel() {
    try {
      Object level = MethodUtils.invokeMethod(getTarget(), &quot;getLevel&quot;);
      return (String) MethodUtils.invokeMethod(level, &quot;toString&quot;);
    } catch (Exception e) {
      logger.error(&quot;{}#getLevel() failed&quot;, getTarget().getClass().getName(), e);
    }
    return null;
  }

  /**
   * Sets the level.
   *
   * @param newLevelStr the new level
   */
  public void setLevel(String newLevelStr) {
    try {
      Object level = MethodUtils.invokeMethod(getTarget(), &quot;getLevel&quot;);
      Object newLevel = MethodUtils.invokeMethod(level, &quot;toLevel&quot;, newLevelStr);
      MethodUtils.invokeMethod(getTarget(), &quot;setLevel&quot;, newLevel);</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>psiprobe\controllers\deploy\CopySingleFileController.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/controllers/deploy/CopySingleFileController.html#L90">90</a></td></tr>
<tr class="a">
<td>psiprobe\controllers\deploy\UploadWarController.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/controllers/deploy/UploadWarController.html#L70">70</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>      boolean reload = false;
      boolean discard = false;

      // parse multipart request and extract the file
      FileItemFactory factory =
          new DiskFileItemFactory(1048000, new File(System.getProperty(&quot;java.io.tmpdir&quot;)));
      ServletFileUpload upload = new ServletFileUpload(factory);
      upload.setSizeMax(-1);
      upload.setHeaderEncoding(StandardCharsets.UTF_8.name());
      try {
        List&lt;FileItem&gt; fileItems = upload.parseRequest(new ServletRequestContext(request));
        for (FileItem fi : fileItems) {
          if (!fi.isFormField()) {
            if (fi.getName() != null &amp;&amp; fi.getName().length() &gt; 0) {</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>psiprobe\beans\accessors\Dbcp2DatasourceAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/beans/accessors/Dbcp2DatasourceAccessor.html#L20">20</a></td></tr>
<tr class="a">
<td>psiprobe\beans\accessors\OpenEjbBasicDatasourceAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/beans/accessors/OpenEjbBasicDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="b">
<td>psiprobe\beans\accessors\Tomcat8DbcpDatasourceAccessor.java</td>
<td>psi-probe-tomcat8</td>
<td><a href="./xref/psiprobe/beans/accessors/Tomcat8DbcpDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="a">
<td>psiprobe\beans\accessors\Tomcat85DbcpDatasourceAccessor.java</td>
<td>psi-probe-tomcat85</td>
<td><a href="./xref/psiprobe/beans/accessors/Tomcat85DbcpDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="b">
<td>psiprobe\beans\accessors\Tomcat9DbcpDatasourceAccessor.java</td>
<td>psi-probe-tomcat9</td>
<td><a href="./xref/psiprobe/beans/accessors/Tomcat9DbcpDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>public class Dbcp2DatasourceAccessor implements DatasourceAccessor {

  @Override
  public DataSourceInfo getInfo(Object resource) throws Exception {
    DataSourceInfo dataSourceInfo = null;
    if (canMap(resource)) {
      BasicDataSource source = (BasicDataSource) resource;
      dataSourceInfo = new DataSourceInfo();
      dataSourceInfo.setBusyConnections(source.getNumActive());
      dataSourceInfo.setEstablishedConnections(source.getNumIdle() + source.getNumActive());
      dataSourceInfo.setMaxConnections(source.getMaxTotal());
      dataSourceInfo.setJdbcUrl(source.getUrl());
      dataSourceInfo.setUsername(source.getUsername());
      dataSourceInfo.setResettable(false);
      dataSourceInfo.setType(&quot;commons-dbcp2&quot;);</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\beans\accessors\DbcpDatasourceAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/beans/accessors/DbcpDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="b">
<td>psiprobe\beans\accessors\Tomcat7DbcpDatasourceAccessor.java</td>
<td>psi-probe-tomcat7</td>
<td><a href="./xref/psiprobe/beans/accessors/Tomcat7DbcpDatasourceAccessor.html#L20">20</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>public class DbcpDatasourceAccessor implements DatasourceAccessor {

  @Override
  public DataSourceInfo getInfo(Object resource) throws Exception {
    DataSourceInfo dataSourceInfo = null;
    if (canMap(resource)) {
      BasicDataSource source = (BasicDataSource) resource;
      dataSourceInfo = new DataSourceInfo();
      dataSourceInfo.setBusyConnections(source.getNumActive());
      dataSourceInfo.setEstablishedConnections(source.getNumIdle() + source.getNumActive());
      dataSourceInfo.setMaxConnections(source.getMaxActive());
      dataSourceInfo.setJdbcUrl(source.getUrl());
      dataSourceInfo.setUsername(source.getUsername());
      dataSourceInfo.setResettable(false);
      dataSourceInfo.setType(&quot;commons-dbcp&quot;);</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\Tomcat70AgentValve.java</td>
<td>psi-probe-tomcat7</td>
<td><a href="./xref/psiprobe/Tomcat70AgentValve.html#L34">34</a></td></tr>
<tr class="b">
<td>psiprobe\Tomcat80AgentValve.java</td>
<td>psi-probe-tomcat8</td>
<td><a href="./xref/psiprobe/Tomcat80AgentValve.html#L34">34</a></td></tr>
<tr class="a">
<td>psiprobe\Tomcat85AgentValve.java</td>
<td>psi-probe-tomcat85</td>
<td><a href="./xref/psiprobe/Tomcat85AgentValve.html#L34">34</a></td></tr>
<tr class="b">
<td>psiprobe\Tomcat90AgentValve.java</td>
<td>psi-probe-tomcat9</td>
<td><a href="./xref/psiprobe/Tomcat90AgentValve.html#L34">34</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>  public Tomcat70AgentValve() {
    super(true);
  }

  @Override
  public void invoke(Request request, Response response) throws IOException, ServletException {
    getNext().invoke(request, response);

    HttpServletRequest servletRequest = request.getRequest();
    HttpSession session = servletRequest.getSession(false);
    if (session != null) {
      String ip = IpInfo.getClientAddress(servletRequest);
      request.getSession(false).setAttribute(ApplicationSession.LAST_ACCESSED_BY_IP, ip);
      request.getSession(false).setAttribute(ApplicationSession.LAST_ACCESSED_LOCALE,
          request.getLocale());
    }
  }

}</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\Tomcat70ContainerAdapter.java</td>
<td>psi-probe-tomcat7</td>
<td><a href="./xref/psiprobe/Tomcat70ContainerAdapter.html#L101">101</a></td></tr>
<tr class="b">
<td>psiprobe\Tomcat80ContainerAdapter.java</td>
<td>psi-probe-tomcat8</td>
<td><a href="./xref/psiprobe/Tomcat80ContainerAdapter.html#L92">92</a></td></tr>
<tr class="a">
<td>psiprobe\Tomcat85ContainerAdapter.java</td>
<td>psi-probe-tomcat85</td>
<td><a href="./xref/psiprobe/Tomcat85ContainerAdapter.html#L93">93</a></td></tr>
<tr class="b">
<td>psiprobe\Tomcat90ContainerAdapter.java</td>
<td>psi-probe-tomcat9</td>
<td><a href="./xref/psiprobe/Tomcat90ContainerAdapter.html#L94">94</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>    NamingResources namingResources = context.getNamingResources();
    for (ContextResourceLink link : namingResources.findResourceLinks()) {
      ApplicationResource resource = new ApplicationResource();

      logger.debug(&quot;reading resourceLink: {}&quot;, link.getName());
      resource.setApplicationName(context.getName());
      resource.setName(link.getName());
      resource.setType(link.getType());
      resource.setLinkTo(link.getGlobal());

      resourceList.add(resource);
    }
  }

  @Override
  public void addContextResource(Context context, List&lt;ApplicationResource&gt; resourceList,
      boolean contextBound) {</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>psiprobe\tools\logging\logback\LogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/logback/LogbackLoggerAccessor.html#L148">148</a></td></tr>
<tr class="b">
<td>psiprobe\tools\logging\slf4jlogback\TomcatSlf4jLogbackLoggerAccessor.java</td>
<td>psi-probe-core</td>
<td><a href="./xref/psiprobe/tools/logging/slf4jlogback/TomcatSlf4jLogbackLoggerAccessor.html#L150">150</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>    if (&quot;ch.qos.logback.classic.sift.SiftingAppender&quot;.equals(appender.getClass().getName())) {
      Object tracker = MethodUtils.invokeMethod(appender, &quot;getAppenderTracker&quot;);
      if (tracker != null) {
        try {
          return (List&lt;Object&gt;) MethodUtils.invokeMethod(tracker, &quot;allComponents&quot;);
        } catch (final NoSuchMethodException e) {
          // XXX Legacy 1.0.x and lower support for logback
          logger.trace(&quot;&quot;, e);
          return (List&lt;Object&gt;) MethodUtils.invokeMethod(tracker, &quot;valueList&quot;);
        }
      }
      return new ArrayList&lt;&gt;();
    }
    return null;
  }

  /**
   * Wrap and add appender.
   *
   * @param appender the appender
   * @param appenders the appenders
   */
  private void wrapAndAddAppender(Object appender, List&lt;LogbackAppenderAccessor&gt; appenders) {</pre></div></td></tr></table></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2009&#x2013;2017
<a href="https://github.com/psi-probe/">psi-probe</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
